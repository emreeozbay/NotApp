@using Microsoft.AspNetCore.Identity
@inject SignInManager<IdentityUser> SignInManager

<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>@ViewData["Title"] - MTÜ Not/Ödev Paylaşım Platformu</title>
  <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
  <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
  <link rel="icon" type="image/png" href="~/img/mtu-logo.png" asp-append-version="true" />
</head>
<body class="bg-dark text-light">

  <!-- NAVBAR (lacivert-mavi) -->
  <header class="topbar">
    <div class="container-xl d-flex align-items-center justify-content-between">
      <!-- MARKA: Tıklanınca anasayfaya gider -->
      <a class="brand d-flex align-items-center gap-2 text-decoration-none"
         asp-controller="Notes" asp-action="Index">
        <img src="~/img/mtu-logo.png" alt="MTÜ" class="brand-logo" />
        <span class="brand-title">MTÜ Not/Ödev Paylaşım Platformu</span>
      </a>

      <!-- Hamburger -->
      <button id="menuToggle" class="menu-btn" aria-label="Menü">
        <span></span><span></span><span></span>
      </button>
    </div>

    <!-- SLIDE MENU -->
    <nav id="slideMenu" class="slide-menu">
      <ul class="list-unstyled m-0">
        @if (!SignInManager.IsSignedIn(User))
        {
          <li><a asp-area="Identity" asp-page="/Account/Login">Giriş</a></li>
          <li><a asp-area="Identity" asp-page="/Account/Register">Kayıt Ol</a></li>
        }
        else
        {
          <li><a asp-controller="Notes" asp-action="Create">Not Yükle</a></li>
          <li>
            <form asp-area="Identity" asp-page="/Account/Logout"
                  asp-route-returnUrl="@Url.Action("Index","Notes")" method="post">
              <button type="submit" class="as-link">Çıkış</button>
            </form>
          </li>
        }
      </ul>
    </nav>
  </header>

  <main class="py-4">
    <div class="container-xl">
      @if (TempData["ok"] is string ok && !string.IsNullOrWhiteSpace(ok))
      {
        <div class="alert alert-success">@ok</div>
      }
      @RenderBody()
    </div>
  </main>

  <footer class="app-footer">
    <div class="container-xl d-flex justify-content-between flex-wrap gap-2">
      <span>© @DateTime.Now.Year Not Paylaşım</span>
      <span class="text-muted">v1.0</span>
    </div>
  </footer>

  <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
  <script src="~/js/notapp.js" asp-append-version="true"></script>
  @RenderSection("Scripts", required: false)
</body>
</html>
